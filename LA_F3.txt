Guião da Ficha de Trabalho 3

Pretende-se que esta ficha ajude os alunos a cimentar os conhecimentos da compilação separada e dos ciclos.

Implemente um módulo chamado desenhos, o que implica criar dois ficheiros: um chamado desenhos.h e outro chamado desenhos.c. O ficheiro desenhos.h deverá conter os protótipos das funções que devem ser conhecidas por outros módulos. O ficheiro desenhos.c deverá conter o código correspondente. Finalmente, crie um ficheiro chamado principal.c que deverá conter a função main.

Pretende-se que o executável receba dois argumentos: o número da tarefa a executar e o argumento que é passado a essa tarefa. Assim, se o programa for corrido da seguinte forma:

./a.out 2 5

Então deverá ser invocada a função correspondente à segunda tarefa e ser passado a essa função o valor 5.
Ficheiro principal.c

O módulo principal deverá ler os parâmetros a partir da linha de comandos. Logo deverá ter o seguinte aspeto:

#include <stdio.h>
#include <stdlib.h>
#include "desenhos.h"

int main(int argc, char *argv[]) {
    if(argc == 3) {
        int tarefa = atoi(argv[1]);
        int numero = atoi(argv[2]);
        switch(tarefa) {
            case 1: imprime_triangulo(numero); break;
            case 2: imprime_losango(numero); break;
            case 3: imprime_hexagono(numero); break;
            default: printf("Erro! Tarefa desconhecida: %d\n", tarefa);
        }
    }
    return 0;
}

Criação de um módulo

Para criar um módulo, é necessário criar dois ficheiros, um com a extensão .h e outro com a extensão .c. O ficheiro com a extensão .h deverá ter os protótipos das funções que devem ser conhecidas de fora e definição de outras coisas que sejam partilhadas tais como estruturas de dados e macros. O esqueleto base dum ficheiro desse género deve ter o seguinte aspeto:

#ifndef ___DESENHOS_H___
#define ___DESENHOS_H___

Aqui dentro aparece o código correspondente aos protótipos

#endif

É importante criar uma macro única para garantir que mesmo que se inclua o mesmo ficheiro duas vezes, ele só seja incluido uma vez. Assim evitam-se muitos dissabores. Costuma-se usar a convenção mostrada aqui para garantir que um ficheiro com o nome desenhos.h tenha a macro DESENHOS_H e assim garantir que a mesma macro não seja utilizada em vários ficheiros.
Tarefa 1

Escreva uma função em C com o seguinte protótipo:

void imprime_triangulo(int num_linhas);

e que reproduza o seguinte padrão (neste caso invocada com o valor 4):

       A
     A B A
   A B C B A
 A B C D C B A

Repare que há um espaço no início da última linha.
Tarefa 2

Adapte a tarefa anterior para desenhar um losango:

       A
     A B A
   A B C B A
 A B C D C B A
   A B C B A
     A B A
       A

Sugestão: Como esta tarefa é muito parecida com a anterior, ao resolver a tarefa anterior use uma função auxiliar para imprimir cada linha do triângulo e depois use essa função nesta tarefa.
Tarefa 3

Escreva uma função com o seguinte protótipo:

void imprime_hexagono(int num);

que imprima o seguinte padrão (no caso de ser invocada com o valor 4):

    ####
   #    #
  #      #
 #        #
  #      #
   #    #
    ####

Sugestão: Comece por imprimir o hexágono cheio antes de se preocupar com o contorno.
